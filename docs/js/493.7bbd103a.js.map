{"version":3,"file":"js/493.7bbd103a.js","mappings":"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","sources":["webpack://vue/./src/pages/control/Log.vue","webpack://vue/src/pages/control/Log.vue","webpack://vue/./src/pages/control/Log.vue?fe98","webpack://vue/./src/pages/control/Log.vue?d530"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flexColumn\",staticStyle:{\"overflow-y\":\"scroll\",\"margin-top\":\"60px\"}},[_c('el-card',{staticClass:\"box-card card flexColumn\",staticStyle:{\"height\":\"150px\",\"flex-shrink\":\"0\",\"margin-top\":\"-70px\"}},[_c('span',{staticClass:\"mText\"},[_vm._v(\"线上访问统计\")]),_c('el-row',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"flexColumn\",staticStyle:{\"align-items\":\"center\"}},[_c('span',{staticClass:\"lText\",staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(_vm._s(_vm.log.todayApiTimes))]),_c('span',{staticClass:\"sText\"},[_vm._v(\"今日接口调用数\")])])]),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"flexColumn\",staticStyle:{\"align-items\":\"center\"}},[_c('span',{staticClass:\"lText\",staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(_vm._s(_vm.log.yesterdayApiTimes))]),_c('span',{staticClass:\"sText\"},[_vm._v(\"昨日接口调用数\")])])]),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"flexColumn\",staticStyle:{\"align-items\":\"center\"}},[_c('span',{staticClass:\"lText\",staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(_vm._s(_vm.log.totalApiTimes))]),_c('span',{staticClass:\"sText\"},[_vm._v(\"总接口调用数\")])])])],1)],1),_c('el-row',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-col',{staticStyle:{\"padding-right\":\"10px\"},attrs:{\"span\":12}},[_c('el-card',{staticClass:\"box-card card flexColumn\"},[_c('div',{ref:\"chart1\",staticStyle:{\"height\":\"360px\"}}),_c('div',{staticStyle:{\"color\":\"var(--deepText)\",\"font-size\":\"20px\",\"position\":\"absolute\",\"left\":\"18%\",\"bottom\":\"20px\"}},[_vm._v(\"近日接口调用分布\")])])],1),_c('el-col',{staticStyle:{\"padding-left\":\"10px\"},attrs:{\"span\":12}},[_c('el-card',{staticClass:\"box-card card flexColumn\"},[_c('div',{ref:\"chart2\",staticStyle:{\"height\":\"360px\"}}),_c('div',{staticStyle:{\"color\":\"var(--deepText)\",\"font-size\":\"20px\",\"position\":\"absolute\",\"left\":\"68%\",\"bottom\":\"20px\"}},[_vm._v(\"近日接口调用数趋势\")])])],1)],1),_c('el-card',{staticClass:\"box-card card flexColumn specialCard\",staticStyle:{\"margin-top\":\"20px\",\"flex-shrink\":\"0\"}},[_c('div',{staticClass:\"flexRow\",staticStyle:{\"margin-bottom\":\"30px\"}},[_c('span',{staticClass:\"mText\"},[_vm._v(\"具体日志记录\")]),_c('svg',{staticClass:\"icon export\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"t\":\"1697590550353\",\"viewBox\":\"0 0 1201 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"p-id\":\"4116\",\"width\":\"30\",\"height\":\"30\"},on:{\"click\":_vm.exportRecords}},[_c('path',{attrs:{\"d\":\"M399.257391 938.261011H88.553242V85.488174H1064.686376V255.940367a40.949476 40.949476 0 0 0 44.020686 42.485082 40.949476 40.949476 0 0 0 44.532555-42.485082V85.488174A87.529505 87.529505 0 0 0 1064.686376 0.006142H88.553242A87.529505 87.529505 0 0 0 0 85.488174v852.772837A87.529505 87.529505 0 0 0 88.553242 1023.743042H399.257391a42.99695 42.99695 0 1 0 0-85.482031z m358.307915-640.859299a40.437608 40.437608 0 0 0-45.556292-41.461345h-445.325552a41.973213 41.973213 0 1 0 0 83.434558h445.325552a40.949476 40.949476 0 0 0 44.532555-41.973213zM266.683462 470.413248a41.461344 41.461344 0 1 0 0 82.922689h223.174644a41.461344 41.461344 0 1 0 0-82.922689zM952.075317 351.147899a40.949476 40.949476 0 0 1 41.461344 40.949476v480.644474l135.645139-131.038323a41.973213 41.973213 0 0 1 70.637846 17.915396 41.461344 41.461344 0 0 1-11.261106 39.925739l-204.747379 200.140564a41.973213 41.973213 0 0 1-58.353004 0l-204.74738-200.140564a40.949476 40.949476 0 0 1-11.772974-39.925739 41.973213 41.973213 0 0 1 30.200239-28.664633 40.949476 40.949476 0 0 1 40.437607 10.749237l135.645139 131.038323V392.097375a41.461344 41.461344 0 0 1 41.973213-40.949476z m-460.681605 333.226361a41.973213 41.973213 0 1 1 0 83.434557H266.683462a41.973213 41.973213 0 1 1 0-83.434557z\",\"fill\":\"currentColor\",\"p-id\":\"4117\"}})]),_c('div',{staticStyle:{\"margin-left\":\"auto\"}},[_c('el-input',{staticClass:\"input\",attrs:{\"suffix-icon\":\"el-icon-search\",\"clearable\":\"\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.search.apply(null, arguments)}},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}}),_c('el-dropdown',{attrs:{\"size\":\"large\",\"split-button\":\"\",\"trigger\":\"click\"},on:{\"click\":function($event){return _vm.search()},\"command\":_vm.handleClick}},[_c('span',{staticStyle:{\"color\":\"var(--btnText)\"}},[_vm._v(_vm._s(_vm.btnWord))]),_c('el-dropdown-menu',{ref:\"dropdown\",staticStyle:{\"background-color\":\"var(--lightBg)!important\",\"border\":\"none\"},attrs:{\"slot\":\"dropdown\",\"append-to-body\":false},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"desc_function\"}},[_vm._v(\"根据接口描述搜索\")]),_c('el-dropdown-item',{attrs:{\"command\":\"user_id\"}},[_vm._v(\"根据调用用户搜索\")]),_c('el-dropdown-item',{attrs:{\"command\":\"create_date\"}},[_vm._v(\"根据调用日期搜索\")])],1)],1)],1),_c('div',{ref:\"here\"})]),_c('el-table',{attrs:{\"data\":_vm.logList,\"header-cell-style\":{\n              height: '40px'\n            },\"row-style\":{height: '62px'}}},[_c('el-table-column',{attrs:{\"width\":\"10px\"}}),_c('el-table-column',{attrs:{\"prop\":\"descFunction\",\"label\":\"接口描述\"}}),_c('el-table-column',{attrs:{\"prop\":\"times\",\"label\":\"调用次数\"}}),_c('el-table-column',{attrs:{\"label\":\"调用用户\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.user && scope.row.user.name)?_c('span',[_vm._v(\" \"+_vm._s(scope.row.user.name)+\" \")]):_c('span',[_vm._v(\"未知用户\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"所属关系\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.elders && scope.row.elders.length!==0)?_c('span',[_vm._l((scope.row.elders),function(elder){return _c('span',{key:elder.elderlyId,staticStyle:{\"font-size\":\"15px\"}},[_vm._v(_vm._s(elder.elderlyName)+\" \")])}),_c('span',[_vm._v(\"的家属\")])],2):_c('span',[_vm._v(\"暂无所属关系\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createDate\",\"label\":\"调用日期\"}})],1),_c('el-pagination',{staticStyle:{\"text-align\":\"center\",\"margin-top\":\"20px\"},attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.total,\"pager-count\":11,\"page-size\":_vm.pageSize,\"current-page\":_vm.currentPage},on:{\"current-change\":_vm.pageChange}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flexColumn\" style=\"overflow-y: scroll;margin-top: 60px\">\n    <el-card class=\"box-card card flexColumn\" style=\"height: 150px;flex-shrink: 0;margin-top: -70px\">\n      <span class=\"mText\">线上访问统计</span>\n      <el-row style=\"margin-top: 20px\">\n        <el-col :span=\"8\">\n          <div class=\"flexColumn\" style=\"align-items: center\">\n            <span class=\"lText\" style=\"margin-bottom: 10px\">{{ log.todayApiTimes }}</span>\n            <span class=\"sText\">今日接口调用数</span>\n          </div>\n        </el-col>\n        <el-col :span=\"8\">\n          <div class=\"flexColumn\" style=\"align-items: center\">\n            <span class=\"lText\" style=\"margin-bottom: 10px\">{{ log.yesterdayApiTimes }}</span>\n            <span class=\"sText\">昨日接口调用数</span>\n          </div>\n        </el-col>\n        <el-col :span=\"8\">\n          <div class=\"flexColumn\" style=\"align-items: center\">\n            <span class=\"lText\" style=\"margin-bottom: 10px\">{{ log.totalApiTimes }}</span>\n            <span class=\"sText\">总接口调用数</span>\n          </div>\n        </el-col>\n      </el-row>\n    </el-card>\n    <el-row style=\"margin-top: 20px\">\n      <el-col style=\"padding-right: 10px\" :span=\"12\">\n        <el-card class=\"box-card card flexColumn\">\n          <div ref=\"chart1\" style=\"height: 360px\"></div>\n          <div style=\"color: var(--deepText);font-size: 20px;position: absolute;left: 18%;bottom: 20px\">近日接口调用分布</div>\n        </el-card>\n      </el-col>\n      <el-col style=\"padding-left: 10px\" :span=\"12\">\n        <el-card class=\"box-card card flexColumn\">\n          <div ref=\"chart2\" style=\"height: 360px\"></div>\n          <div style=\"color: var(--deepText);font-size: 20px;position: absolute;left: 68%;bottom: 20px\">近日接口调用数趋势</div>\n        </el-card>\n      </el-col>\n    </el-row>\n    <el-card class=\"box-card card flexColumn specialCard\" style=\"margin-top: 20px;flex-shrink: 0\">\n      <div class=\"flexRow\" style=\"margin-bottom: 30px\">\n        <span class=\"mText\">具体日志记录</span>\n        <svg @click=\"exportRecords\" style=\"margin-left: 20px\" t=\"1697590550353\" class=\"icon export\"\n             viewBox=\"0 0 1201 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n             p-id=\"4116\" width=\"30\" height=\"30\">\n          <path\n              d=\"M399.257391 938.261011H88.553242V85.488174H1064.686376V255.940367a40.949476 40.949476 0 0 0 44.020686 42.485082 40.949476 40.949476 0 0 0 44.532555-42.485082V85.488174A87.529505 87.529505 0 0 0 1064.686376 0.006142H88.553242A87.529505 87.529505 0 0 0 0 85.488174v852.772837A87.529505 87.529505 0 0 0 88.553242 1023.743042H399.257391a42.99695 42.99695 0 1 0 0-85.482031z m358.307915-640.859299a40.437608 40.437608 0 0 0-45.556292-41.461345h-445.325552a41.973213 41.973213 0 1 0 0 83.434558h445.325552a40.949476 40.949476 0 0 0 44.532555-41.973213zM266.683462 470.413248a41.461344 41.461344 0 1 0 0 82.922689h223.174644a41.461344 41.461344 0 1 0 0-82.922689zM952.075317 351.147899a40.949476 40.949476 0 0 1 41.461344 40.949476v480.644474l135.645139-131.038323a41.973213 41.973213 0 0 1 70.637846 17.915396 41.461344 41.461344 0 0 1-11.261106 39.925739l-204.747379 200.140564a41.973213 41.973213 0 0 1-58.353004 0l-204.74738-200.140564a40.949476 40.949476 0 0 1-11.772974-39.925739 41.973213 41.973213 0 0 1 30.200239-28.664633 40.949476 40.949476 0 0 1 40.437607 10.749237l135.645139 131.038323V392.097375a41.461344 41.461344 0 0 1 41.973213-40.949476z m-460.681605 333.226361a41.973213 41.973213 0 1 1 0 83.434557H266.683462a41.973213 41.973213 0 1 1 0-83.434557z\"\n              fill=\"currentColor\" p-id=\"4117\"></path>\n        </svg>\n        <div style=\"margin-left: auto\">\n          <el-input\n              class=\"input\"\n              suffix-icon=\"el-icon-search\"\n              v-model=\"keyword\"\n              clearable\n              @keydown.enter.native=\"search\"\n          />\n          <el-dropdown @click=\"search()\" size=\"large\" split-button trigger=\"click\" @command=\"handleClick\">\n            <span style=\"color: var(--btnText)\">{{ btnWord }}</span>\n            <el-dropdown-menu ref=\"dropdown\" slot=\"dropdown\" :append-to-body=\"false\"\n                              style=\"background-color: var(--lightBg)!important;border: none\">\n              <el-dropdown-item command=\"desc_function\">根据接口描述搜索</el-dropdown-item>\n              <el-dropdown-item command=\"user_id\">根据调用用户搜索</el-dropdown-item>\n              <el-dropdown-item command=\"create_date\">根据调用日期搜索</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </div>\n        <div ref=\"here\"></div>\n      </div>\n      <el-table\n          :data=\"logList\"\n          :header-cell-style=\"{\n                height: '40px'\n              }\"\n          :row-style=\"{height: '62px'}\">\n        <el-table-column width=\"10px\"/>\n        <el-table-column\n            prop=\"descFunction\"\n            label=\"接口描述\">\n        </el-table-column>\n        <el-table-column\n            prop=\"times\"\n            label=\"调用次数\">\n        </el-table-column>\n        <el-table-column\n            label=\"调用用户\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.user && scope.row.user.name\">\n              {{scope.row.user.name}}\n            </span>\n            <span v-else>未知用户</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"所属关系\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.elders && scope.row.elders.length!==0\">\n              <span v-for=\"elder in scope.row.elders\" :key=\"elder.elderlyId\"\n                    style=\"font-size: 15px\">{{ elder.elderlyName }} </span>\n              <span>的家属</span>\n            </span>\n            <span v-else>暂无所属关系</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n            prop=\"createDate\"\n            label=\"调用日期\">\n        </el-table-column>\n      </el-table>\n      <el-pagination\n          style=\"text-align: center;margin-top: 20px\"\n          background\n          layout=\"prev, pager, next\"\n          :total=\"total\"\n          :pager-count=\"11\"\n          :page-size=\"pageSize\"\n          :current-page=\"currentPage\"\n          @current-change=\"pageChange\">\n      </el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport {serverIp} from \"../../../public/config\";\n\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"Log\",\n  data() {\n    return {\n      //养老院名称\n      careHome: localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).careHomeName : '',\n      //日志信息\n      log: {},\n      logList: [],\n      //分页相关\n      currentPage: 1,\n      pageSize: 5,\n      total: 0,\n      //搜索关键词\n      keyword: '',\n      searchMode: 'desc_function'\n    }\n  },\n  methods: {\n    //加载日志信息\n    load() {\n      //相关数据获取\n      this.request.get('/api-log/query', {\n        params: {\n          name: this.careHome\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          //获取成功\n          this.log = res.data\n          this.getCharts()\n        } else {\n          this.$notify({\n            type: 'error',\n            message: res.msg,\n            title: '日志信息获取失败'\n          })\n        }\n      }).catch(err => {\n        this.$notify({\n          type: 'error',\n          message: err,\n          title: '日志信息获取失败'\n        })\n      })\n    },\n    //创建图表\n    getCharts() {\n      //图表一\n      this.$echarts.init(this.$refs.chart1).setOption({\n        tooltip: {\n          trigger: 'item',\n          formatter: \"<span style='font-weight: bold'>{b}</span> <br/>{a}: {c} ({d}%)\",\n          position: 'top',\n          confine: true\n        },\n        legend: {\n          data: Object.keys(this.log.apiDistribution),\n          textStyle: {\n            color: ' ',\n            fontWeight: 'bold'\n          },\n          itemGap: 15,\n          orient: 'vertical',\n          top: 0,\n          left: 0\n        },\n        series: [\n          {\n            name: \"接口调用次数\",\n            type: \"pie\",\n            center: ['65%', '45%'],\n            radius: ['50%', '80%'],\n            data: Object.keys(this.log.apiDistribution).map((key) => ({\n              value: this.log.apiDistribution[key],\n              name: key,\n              labelLine: {\n                position: 'inner',\n                show: false,\n              },\n              label: {\n                show: false,\n              },\n            })),\n            itemStyle: {\n              borderWidth: '1',\n              borderColor: '#000',\n            },\n          },\n        ],\n      })\n      //图表二\n      this.$echarts.init(this.$refs.chart2).setOption({\n        tooltip: {\n          trigger: 'item',\n          formatter: \"<span style='font-weight: bold'>{b}</span> <br/>{a}: {c}\",\n          position: 'top',\n          confine: true\n        },\n        xAxis: {\n          data: Object.keys(this.log.apiTimesTrend).reverse(),\n        },\n        yAxis: {},\n        series: [\n          {\n            name: \"日接口调用数\",\n            type: \"line\",\n            data: Object.values(this.log.apiTimesTrend).reverse(),\n          },\n        ],\n      })\n    },\n    //换页\n    pageChange(pageNum) {\n      this.currentPage = pageNum\n      this.search()\n    },\n    //搜索\n    search() {\n      //日志记录获取\n      this.request.get('/api-log/search', {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          keyword: this.keyword,\n          type: this.searchMode,\n          name: this.careHome\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          //成功\n          this.logList = res.data.records\n          //将字符串属性转换为Long类型\n          this.total = parseInt(res.data.total)\n        } else {\n          this.$notify({\n            type: 'error',\n            title: '获取日志记录失败',\n            message: res.msg\n          })\n        }\n      }).catch(err => {\n        this.$notify({\n          type: 'error',\n          title: '获取日志记录失败',\n          message: err\n        })\n      })\n    },\n    //修改搜索方式\n    handleClick(command) {\n      this.searchMode = command\n    },\n    //导出记录\n    exportRecords() {\n      window.location.href = 'https://' + serverIp + '/api-log/export/' + this.careHome\n    }\n  },\n  mounted() {\n    this.load()\n    this.search()\n    //修改popper的所在位置\n    this.$refs.here.appendChild(\n        this.$refs.dropdown.popperElm\n    )\n  },\n  computed: {\n    //根据关键词类型显示按钮提示文字和图标\n    btnWord() {\n      switch (this.searchMode) {\n        case 'desc_function':\n          return '根据接口描述搜索'\n        case 'user_id':\n          return '根据调用用户搜索'\n        case 'create_date':\n          return '根据调用日期搜索'\n        default:\n          return '搜索'\n      }\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n/*card*/\n>>> .el-card__header {\n  border-color: var(--deepText);\n}\n\n.box-card:hover {\n  background-color: var(--hover);\n}\n\n.card {\n  background-color: var(--lightBg);\n  border: 1px solid var(--inputBorder);\n  color: var(--deepText);\n}\n\n/*文字*/\n.sText {\n  font-size: 13px;\n  color: var(--lightText);\n}\n\n.lText {\n  font-size: 24px;\n  color: var(--deepText);\n}\n\n.mText {\n  font-size: 18px;\n  color: var(--deepText);\n}\n\n/*滚动条*/\n::-webkit-scrollbar {\n  overflow: auto;\n  width: 10px;\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: var(--th);\n  border-radius: 5px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background-color: var(--lightText);\n}\n\n/*表格样式*/\n/*表头背景*/\n>>> .el-table .cell {\n  height: 20px;\n}\n\n>>> .el-table th {\n  background-color: var(--lightBg) !important;\n}\n\n/*表头文字*/\n>>> .el-table thead {\n  color: var(--th)\n}\n\n/*背景*/\n>>> .el-table tr {\n  background-color: var(--lightBg);\n  color: var(--deepText);\n  font-weight: normal;\n}\n\n/*行间线*/\n>>> .el-table td, .building-top .el-table th.is-leaf {\n  border-bottom: 0 !important;\n}\n\n/*表格末尾*/\n>>> .el-table::before {\n  border-bottom: 0;\n  height: 0;\n}\n\n>>> .el-table, .el-table__expanded-cell {\n  background-color: var(--lightBg) !important;\n}\n\n/*鼠标悬浮*/\n>>> .el-table tbody tr:hover > td {\n  background-color: var(--hover) !important;\n}\n\n/*操作列样式*/\n>>> td.cellClass .cell {\n  height: 34px !important;\n}\n\n.specialCard:hover {\n  background-color: var(--lightBg);\n}\n\n/*分页管理器样式*/\n>>> .btn-quicknext, >>> .btn-quickprev, >>> .btn-next, >>> .btn-prev, >>> .number {\n  color: var(--deepText) !important;\n  background-color: var(--deepBg) !important;\n}\n\n>>> .btn-quicknext:hover, >>> .btn-quickprev:hover, >>> .btn-next:hover, >>> .btn-prev:hover, >>> .number:hover {\n  background-color: var(--hover) !important;\n}\n\n>>> .active {\n  background-color: var(--btn) !important;\n  color: var(--btnText) !important;\n}\n\n>>> .active:hover {\n  background-color: var(--btnActive) !important;\n}\n\n/*搜索按钮*/\n>>> .el-button--default {\n  font-size: 13px;\n  font-weight: bold;\n  background-color: var(--btn);\n  color: var(--deepText);\n  border: none;\n  transition: 0.2s;\n}\n\n>>> .el-button--default:hover {\n  background-color: var(--btnActive);\n}\n\n>>> .el-button--default::before {\n  display: none;\n}\n\n/*下拉框样式*/\n>>> .el-dropdown__caret-button {\n  font-size: 13px;\n  font-weight: bold;\n  margin-left: 2px !important;\n  color: var(--btnText);\n}\n\n>>> .el-dropdown-menu {\n  background-color: var(--inputBg) !important;\n  padding: 0;\n}\n\n>>> .popper__arrow, >>> .popper__arrow::after {\n  border-bottom-color: var(--inputBg) !important;\n  border-top-color: var(--inputBg) !important;\n}\n\n>>> .el-dropdown-menu__item {\n  color: var(--deepText);\n  font-weight: bold;\n  padding: 10px 30px;\n  background-color: var(--inputBg);\n}\n\n>>> .el-dropdown-menu__item:hover {\n  background-color: var(--hover);\n  color: var(--deepText);\n}\n\n>>> .el-dropdown > .el-button-group > .el-button:not(:last-child) {\n  width: 148px;\n}\n\n/*输入框样式*/\n.input {\n  margin-right: 20px;\n  width: 300px;\n  justify-content: center;\n  align-items: center;\n  border-radius: 5px;\n}\n\n>>> .el-input__inner {\n  color: var(--deepText);\n  background-color: var(--inputBg);\n  border: solid 1px var(--inputBorder);\n  border-radius: 5px;\n}\n\n>>> .el-date-editor .el-input__inner::placeholder {\n  color: var(--lightText);\n  padding-left: 10px;\n}\n\n>>> .el-input__icon {\n  color: var(--deepText);\n}\n\n/*导出按钮*/\n.export {\n  color: var(--deepText);\n  cursor: pointer;\n  transition: 0.2s;\n}\n\n.export:hover {\n  color: var(--btn);\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Log.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Log.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Log.vue?vue&type=template&id=dce188cc&scoped=true&\"\nimport script from \"./Log.vue?vue&type=script&lang=js&\"\nexport * from \"./Log.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Log.vue?vue&type=style&index=0&id=dce188cc&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dce188cc\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","attrs","_s","log","todayApiTimes","yesterdayApiTimes","totalApiTimes","ref","on","exportRecords","nativeOn","$event","type","indexOf","_k","keyCode","key","search","apply","arguments","model","value","keyword","callback","$$v","expression","handleClick","btnWord","slot","logList","height","scopedSlots","_u","fn","scope","row","user","name","elders","length","_l","elder","elderlyId","elderlyName","total","pageSize","currentPage","pageChange","staticRenderFns","data","careHome","localStorage","getItem","JSON","parse","careHomeName","searchMode","methods","load","request","get","params","then","res","code","getCharts","$notify","message","msg","title","catch","err","$echarts","init","$refs","chart1","setOption","tooltip","trigger","formatter","position","confine","legend","Object","keys","apiDistribution","textStyle","color","fontWeight","itemGap","orient","top","left","series","center","radius","map","labelLine","show","label","itemStyle","borderWidth","borderColor","chart2","xAxis","apiTimesTrend","reverse","yAxis","values","pageNum","records","parseInt","command","window","location","href","serverIp","mounted","here","appendChild","dropdown","popperElm","computed","component"],"sourceRoot":""}