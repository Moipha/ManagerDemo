{"version":3,"file":"js/493.c4ff5cdb.js","mappings":"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","sources":["webpack://vue/./src/pages/control/Log.vue","webpack://vue/src/pages/control/Log.vue","webpack://vue/./src/pages/control/Log.vue?fe98","webpack://vue/./src/pages/control/Log.vue?d530"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flexColumn\",staticStyle:{\"overflow-y\":\"scroll\",\"margin-top\":\"60px\"}},[_c('el-card',{staticClass:\"box-card card flexColumn\",staticStyle:{\"height\":\"150px\",\"flex-shrink\":\"0\",\"margin-top\":\"-70px\"}},[_c('span',{staticClass:\"mText\"},[_vm._v(\"线上访问统计\")]),_c('el-row',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"flexColumn\",staticStyle:{\"align-items\":\"center\"}},[_c('span',{staticClass:\"lText\",staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(_vm._s(_vm.log.todayApiTimes))]),_c('span',{staticClass:\"sText\"},[_vm._v(\"今日接口调用数\")])])]),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"flexColumn\",staticStyle:{\"align-items\":\"center\"}},[_c('span',{staticClass:\"lText\",staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(_vm._s(_vm.log.yesterdayApiTimes))]),_c('span',{staticClass:\"sText\"},[_vm._v(\"昨日接口调用数\")])])]),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"flexColumn\",staticStyle:{\"align-items\":\"center\"}},[_c('span',{staticClass:\"lText\",staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(_vm._s(_vm.log.totalApiTimes))]),_c('span',{staticClass:\"sText\"},[_vm._v(\"总接口调用数\")])])])],1)],1),_c('el-row',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-col',{staticStyle:{\"padding-right\":\"10px\"},attrs:{\"span\":12}},[_c('el-card',{staticClass:\"box-card card flexColumn\"},[_c('div',{ref:\"chart1\",staticStyle:{\"height\":\"360px\"}}),_c('div',{staticStyle:{\"color\":\"var(--deepText)\",\"font-size\":\"20px\",\"position\":\"absolute\",\"left\":\"18%\",\"bottom\":\"20px\"}},[_vm._v(\"近日接口调用分布\")])])],1),_c('el-col',{staticStyle:{\"padding-left\":\"10px\"},attrs:{\"span\":12}},[_c('el-card',{staticClass:\"box-card card flexColumn\"},[_c('div',{ref:\"chart2\",staticStyle:{\"height\":\"360px\"}}),_c('div',{staticStyle:{\"color\":\"var(--deepText)\",\"font-size\":\"20px\",\"position\":\"absolute\",\"left\":\"68%\",\"bottom\":\"20px\"}},[_vm._v(\"近日接口调用数趋势\")])])],1)],1),_c('el-card',{staticClass:\"box-card card flexColumn specialCard\",staticStyle:{\"margin-top\":\"20px\",\"flex-shrink\":\"0\"}},[_c('div',{staticClass:\"flexRow\",staticStyle:{\"margin-bottom\":\"30px\"}},[_c('span',{staticClass:\"mText\"},[_vm._v(\"具体日志记录\")]),_c('svg',{staticClass:\"icon export\",staticStyle:{\"margin-left\":\"20px\"},attrs:{\"t\":\"1697590550353\",\"viewBox\":\"0 0 1201 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"p-id\":\"4116\",\"width\":\"30\",\"height\":\"30\"},on:{\"click\":_vm.exportRecords}},[_c('path',{attrs:{\"d\":\"M399.257391 938.261011H88.553242V85.488174H1064.686376V255.940367a40.949476 40.949476 0 0 0 44.020686 42.485082 40.949476 40.949476 0 0 0 44.532555-42.485082V85.488174A87.529505 87.529505 0 0 0 1064.686376 0.006142H88.553242A87.529505 87.529505 0 0 0 0 85.488174v852.772837A87.529505 87.529505 0 0 0 88.553242 1023.743042H399.257391a42.99695 42.99695 0 1 0 0-85.482031z m358.307915-640.859299a40.437608 40.437608 0 0 0-45.556292-41.461345h-445.325552a41.973213 41.973213 0 1 0 0 83.434558h445.325552a40.949476 40.949476 0 0 0 44.532555-41.973213zM266.683462 470.413248a41.461344 41.461344 0 1 0 0 82.922689h223.174644a41.461344 41.461344 0 1 0 0-82.922689zM952.075317 351.147899a40.949476 40.949476 0 0 1 41.461344 40.949476v480.644474l135.645139-131.038323a41.973213 41.973213 0 0 1 70.637846 17.915396 41.461344 41.461344 0 0 1-11.261106 39.925739l-204.747379 200.140564a41.973213 41.973213 0 0 1-58.353004 0l-204.74738-200.140564a40.949476 40.949476 0 0 1-11.772974-39.925739 41.973213 41.973213 0 0 1 30.200239-28.664633 40.949476 40.949476 0 0 1 40.437607 10.749237l135.645139 131.038323V392.097375a41.461344 41.461344 0 0 1 41.973213-40.949476z m-460.681605 333.226361a41.973213 41.973213 0 1 1 0 83.434557H266.683462a41.973213 41.973213 0 1 1 0-83.434557z\",\"fill\":\"currentColor\",\"p-id\":\"4117\"}})]),_c('div',{staticStyle:{\"margin-left\":\"auto\"}},[_c('el-input',{staticClass:\"input\",attrs:{\"suffix-icon\":\"el-icon-search\",\"clearable\":\"\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.search.apply(null, arguments)}},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}}),_c('el-dropdown',{attrs:{\"size\":\"large\",\"split-button\":\"\",\"trigger\":\"click\"},on:{\"click\":function($event){return _vm.search()},\"command\":_vm.handleClick}},[_c('span',{staticStyle:{\"color\":\"var(--btnText)\"}},[_vm._v(_vm._s(_vm.btnWord))]),_c('el-dropdown-menu',{ref:\"dropdown\",staticStyle:{\"background-color\":\"var(--lightBg)!important\",\"border\":\"none\"},attrs:{\"slot\":\"dropdown\",\"append-to-body\":false},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"desc_function\"}},[_vm._v(\"根据接口描述搜索\")]),_c('el-dropdown-item',{attrs:{\"command\":\"user_id\"}},[_vm._v(\"根据调用用户搜索\")]),_c('el-dropdown-item',{attrs:{\"command\":\"create_date\"}},[_vm._v(\"根据调用日期搜索\")])],1)],1)],1),_c('div',{ref:\"here\"})]),_c('el-table',{attrs:{\"data\":_vm.logList,\"header-cell-style\":{\n              height: '40px'\n            },\"row-style\":{height: '62px'}}},[_c('el-table-column',{attrs:{\"width\":\"10px\"}}),_c('el-table-column',{attrs:{\"prop\":\"descFunction\",\"label\":\"接口描述\"}}),_c('el-table-column',{attrs:{\"prop\":\"times\",\"label\":\"调用次数\"}}),_c('el-table-column',{attrs:{\"label\":\"调用用户\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.user && scope.row.user.name)?_c('span',[_vm._v(\" \"+_vm._s(scope.row.user.name)+\" \")]):_c('span',[_vm._v(\"未知用户\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"所属关系\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.elders && scope.row.elders.length!==0)?_c('span',[_vm._l((scope.row.elders),function(elder){return _c('span',{key:elder.elderlyId,staticStyle:{\"font-size\":\"15px\"}},[_vm._v(_vm._s(elder.elderlyName)+\" \")])}),_c('span',[_vm._v(\"的家属\")])],2):_c('span',[_vm._v(\"暂无所属关系\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createDate\",\"label\":\"调用日期\"}})],1),_c('el-pagination',{staticStyle:{\"text-align\":\"center\",\"margin-top\":\"20px\"},attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.total,\"pager-count\":11,\"page-size\":_vm.pageSize,\"current-page\":_vm.currentPage},on:{\"current-change\":_vm.pageChange}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"flexColumn\" style=\"overflow-y: scroll;margin-top: 60px\">\r\n    <el-card class=\"box-card card flexColumn\" style=\"height: 150px;flex-shrink: 0;margin-top: -70px\">\r\n      <span class=\"mText\">线上访问统计</span>\r\n      <el-row style=\"margin-top: 20px\">\r\n        <el-col :span=\"8\">\r\n          <div class=\"flexColumn\" style=\"align-items: center\">\r\n            <span class=\"lText\" style=\"margin-bottom: 10px\">{{ log.todayApiTimes }}</span>\r\n            <span class=\"sText\">今日接口调用数</span>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <div class=\"flexColumn\" style=\"align-items: center\">\r\n            <span class=\"lText\" style=\"margin-bottom: 10px\">{{ log.yesterdayApiTimes }}</span>\r\n            <span class=\"sText\">昨日接口调用数</span>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <div class=\"flexColumn\" style=\"align-items: center\">\r\n            <span class=\"lText\" style=\"margin-bottom: 10px\">{{ log.totalApiTimes }}</span>\r\n            <span class=\"sText\">总接口调用数</span>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </el-card>\r\n    <el-row style=\"margin-top: 20px\">\r\n      <el-col style=\"padding-right: 10px\" :span=\"12\">\r\n        <el-card class=\"box-card card flexColumn\">\r\n          <div ref=\"chart1\" style=\"height: 360px\"></div>\r\n          <div style=\"color: var(--deepText);font-size: 20px;position: absolute;left: 18%;bottom: 20px\">近日接口调用分布</div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col style=\"padding-left: 10px\" :span=\"12\">\r\n        <el-card class=\"box-card card flexColumn\">\r\n          <div ref=\"chart2\" style=\"height: 360px\"></div>\r\n          <div style=\"color: var(--deepText);font-size: 20px;position: absolute;left: 68%;bottom: 20px\">近日接口调用数趋势</div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <el-card class=\"box-card card flexColumn specialCard\" style=\"margin-top: 20px;flex-shrink: 0\">\r\n      <div class=\"flexRow\" style=\"margin-bottom: 30px\">\r\n        <span class=\"mText\">具体日志记录</span>\r\n        <svg @click=\"exportRecords\" style=\"margin-left: 20px\" t=\"1697590550353\" class=\"icon export\"\r\n             viewBox=\"0 0 1201 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\r\n             p-id=\"4116\" width=\"30\" height=\"30\">\r\n          <path\r\n              d=\"M399.257391 938.261011H88.553242V85.488174H1064.686376V255.940367a40.949476 40.949476 0 0 0 44.020686 42.485082 40.949476 40.949476 0 0 0 44.532555-42.485082V85.488174A87.529505 87.529505 0 0 0 1064.686376 0.006142H88.553242A87.529505 87.529505 0 0 0 0 85.488174v852.772837A87.529505 87.529505 0 0 0 88.553242 1023.743042H399.257391a42.99695 42.99695 0 1 0 0-85.482031z m358.307915-640.859299a40.437608 40.437608 0 0 0-45.556292-41.461345h-445.325552a41.973213 41.973213 0 1 0 0 83.434558h445.325552a40.949476 40.949476 0 0 0 44.532555-41.973213zM266.683462 470.413248a41.461344 41.461344 0 1 0 0 82.922689h223.174644a41.461344 41.461344 0 1 0 0-82.922689zM952.075317 351.147899a40.949476 40.949476 0 0 1 41.461344 40.949476v480.644474l135.645139-131.038323a41.973213 41.973213 0 0 1 70.637846 17.915396 41.461344 41.461344 0 0 1-11.261106 39.925739l-204.747379 200.140564a41.973213 41.973213 0 0 1-58.353004 0l-204.74738-200.140564a40.949476 40.949476 0 0 1-11.772974-39.925739 41.973213 41.973213 0 0 1 30.200239-28.664633 40.949476 40.949476 0 0 1 40.437607 10.749237l135.645139 131.038323V392.097375a41.461344 41.461344 0 0 1 41.973213-40.949476z m-460.681605 333.226361a41.973213 41.973213 0 1 1 0 83.434557H266.683462a41.973213 41.973213 0 1 1 0-83.434557z\"\r\n              fill=\"currentColor\" p-id=\"4117\"></path>\r\n        </svg>\r\n        <div style=\"margin-left: auto\">\r\n          <el-input\r\n              class=\"input\"\r\n              suffix-icon=\"el-icon-search\"\r\n              v-model=\"keyword\"\r\n              clearable\r\n              @keydown.enter.native=\"search\"\r\n          />\r\n          <el-dropdown @click=\"search()\" size=\"large\" split-button trigger=\"click\" @command=\"handleClick\">\r\n            <span style=\"color: var(--btnText)\">{{ btnWord }}</span>\r\n            <el-dropdown-menu ref=\"dropdown\" slot=\"dropdown\" :append-to-body=\"false\"\r\n                              style=\"background-color: var(--lightBg)!important;border: none\">\r\n              <el-dropdown-item command=\"desc_function\">根据接口描述搜索</el-dropdown-item>\r\n              <el-dropdown-item command=\"user_id\">根据调用用户搜索</el-dropdown-item>\r\n              <el-dropdown-item command=\"create_date\">根据调用日期搜索</el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n        </div>\r\n        <div ref=\"here\"></div>\r\n      </div>\r\n      <el-table\r\n          :data=\"logList\"\r\n          :header-cell-style=\"{\r\n                height: '40px'\r\n              }\"\r\n          :row-style=\"{height: '62px'}\">\r\n        <el-table-column width=\"10px\"/>\r\n        <el-table-column\r\n            prop=\"descFunction\"\r\n            label=\"接口描述\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"times\"\r\n            label=\"调用次数\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            label=\"调用用户\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.user && scope.row.user.name\">\r\n              {{scope.row.user.name}}\r\n            </span>\r\n            <span v-else>未知用户</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"所属关系\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.elders && scope.row.elders.length!==0\">\r\n              <span v-for=\"elder in scope.row.elders\" :key=\"elder.elderlyId\"\r\n                    style=\"font-size: 15px\">{{ elder.elderlyName }} </span>\r\n              <span>的家属</span>\r\n            </span>\r\n            <span v-else>暂无所属关系</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"createDate\"\r\n            label=\"调用日期\">\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n          style=\"text-align: center;margin-top: 20px\"\r\n          background\r\n          layout=\"prev, pager, next\"\r\n          :total=\"total\"\r\n          :pager-count=\"11\"\r\n          :page-size=\"pageSize\"\r\n          :current-page=\"currentPage\"\r\n          @current-change=\"pageChange\">\r\n      </el-pagination>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {serverIp} from \"../../../public/config\";\r\n\r\nexport default {\r\n  // eslint-disable-next-line vue/multi-word-component-names\r\n  name: \"Log\",\r\n  data() {\r\n    return {\r\n      //养老院名称\r\n      careHome: localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).careHomeName : '',\r\n      //日志信息\r\n      log: {},\r\n      logList: [],\r\n      //分页相关\r\n      currentPage: 1,\r\n      pageSize: 5,\r\n      total: 0,\r\n      //搜索关键词\r\n      keyword: '',\r\n      searchMode: 'desc_function'\r\n    }\r\n  },\r\n  methods: {\r\n    //加载日志信息\r\n    load() {\r\n      //相关数据获取\r\n      this.request.get('/api-log/query', {\r\n        params: {\r\n          name: this.careHome\r\n        }\r\n      }).then(res => {\r\n        if (res.code === '200') {\r\n          //获取成功\r\n          this.log = res.data\r\n          this.getCharts()\r\n        } else {\r\n          this.$notify({\r\n            type: 'error',\r\n            message: res.msg,\r\n            title: '日志信息获取失败'\r\n          })\r\n        }\r\n      }).catch(err => {\r\n        this.$notify({\r\n          type: 'error',\r\n          message: err,\r\n          title: '日志信息获取失败'\r\n        })\r\n      })\r\n    },\r\n    //创建图表\r\n    getCharts() {\r\n      //图表一\r\n      this.$echarts.init(this.$refs.chart1).setOption({\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: \"<span style='font-weight: bold'>{b}</span> <br/>{a}: {c} ({d}%)\",\r\n          position: 'top',\r\n          confine: true\r\n        },\r\n        legend: {\r\n          data: Object.keys(this.log.apiDistribution),\r\n          textStyle: {\r\n            color: ' ',\r\n            fontWeight: 'bold'\r\n          },\r\n          itemGap: 15,\r\n          orient: 'vertical',\r\n          top: 0,\r\n          left: 0\r\n        },\r\n        series: [\r\n          {\r\n            name: \"接口调用次数\",\r\n            type: \"pie\",\r\n            center: ['65%', '45%'],\r\n            radius: ['50%', '80%'],\r\n            data: Object.keys(this.log.apiDistribution).map((key) => ({\r\n              value: this.log.apiDistribution[key],\r\n              name: key,\r\n              labelLine: {\r\n                position: 'inner',\r\n                show: false,\r\n              },\r\n              label: {\r\n                show: false,\r\n              },\r\n            })),\r\n            itemStyle: {\r\n              borderWidth: '1',\r\n              borderColor: '#000',\r\n            },\r\n          },\r\n        ],\r\n      })\r\n      //图表二\r\n      this.$echarts.init(this.$refs.chart2).setOption({\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: \"<span style='font-weight: bold'>{b}</span> <br/>{a}: {c}\",\r\n          position: 'top',\r\n          confine: true\r\n        },\r\n        xAxis: {\r\n          data: Object.keys(this.log.apiTimesTrend).reverse(),\r\n        },\r\n        yAxis: {},\r\n        series: [\r\n          {\r\n            name: \"日接口调用数\",\r\n            type: \"line\",\r\n            data: Object.values(this.log.apiTimesTrend).reverse(),\r\n          },\r\n        ],\r\n      })\r\n    },\r\n    //换页\r\n    pageChange(pageNum) {\r\n      this.currentPage = pageNum\r\n      this.search()\r\n    },\r\n    //搜索\r\n    search() {\r\n      //日志记录获取\r\n      this.request.get('/api-log/search', {\r\n        params: {\r\n          pageNum: this.currentPage,\r\n          pageSize: this.pageSize,\r\n          keyword: this.keyword,\r\n          type: this.searchMode,\r\n          name: this.careHome\r\n        }\r\n      }).then(res => {\r\n        if (res.code === '200') {\r\n          //成功\r\n          this.logList = res.data.records\r\n          //将字符串属性转换为Long类型\r\n          this.total = parseInt(res.data.total)\r\n        } else {\r\n          this.$notify({\r\n            type: 'error',\r\n            title: '获取日志记录失败',\r\n            message: res.msg\r\n          })\r\n        }\r\n      }).catch(err => {\r\n        this.$notify({\r\n          type: 'error',\r\n          title: '获取日志记录失败',\r\n          message: err\r\n        })\r\n      })\r\n    },\r\n    //修改搜索方式\r\n    handleClick(command) {\r\n      this.searchMode = command\r\n    },\r\n    //导出记录\r\n    exportRecords() {\r\n      window.location.href = 'https://' + serverIp + '/api-log/export/' + this.careHome\r\n    }\r\n  },\r\n  mounted() {\r\n    this.load()\r\n    this.search()\r\n    //修改popper的所在位置\r\n    this.$refs.here.appendChild(\r\n        this.$refs.dropdown.popperElm\r\n    )\r\n  },\r\n  computed: {\r\n    //根据关键词类型显示按钮提示文字和图标\r\n    btnWord() {\r\n      switch (this.searchMode) {\r\n        case 'desc_function':\r\n          return '根据接口描述搜索'\r\n        case 'user_id':\r\n          return '根据调用用户搜索'\r\n        case 'create_date':\r\n          return '根据调用日期搜索'\r\n        default:\r\n          return '搜索'\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n/*card*/\r\n>>> .el-card__header {\r\n  border-color: var(--deepText);\r\n}\r\n\r\n.box-card:hover {\r\n  background-color: var(--hover);\r\n}\r\n\r\n.card {\r\n  background-color: var(--lightBg);\r\n  border: 1px solid var(--inputBorder);\r\n  color: var(--deepText);\r\n}\r\n\r\n/*文字*/\r\n.sText {\r\n  font-size: 13px;\r\n  color: var(--lightText);\r\n}\r\n\r\n.lText {\r\n  font-size: 24px;\r\n  color: var(--deepText);\r\n}\r\n\r\n.mText {\r\n  font-size: 18px;\r\n  color: var(--deepText);\r\n}\r\n\r\n/*滚动条*/\r\n::-webkit-scrollbar {\r\n  overflow: auto;\r\n  width: 10px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n  background-color: var(--th);\r\n  border-radius: 5px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb:hover {\r\n  background-color: var(--lightText);\r\n}\r\n\r\n/*表格样式*/\r\n/*表头背景*/\r\n>>> .el-table .cell {\r\n  height: 20px;\r\n}\r\n\r\n>>> .el-table th {\r\n  background-color: var(--lightBg) !important;\r\n}\r\n\r\n/*表头文字*/\r\n>>> .el-table thead {\r\n  color: var(--th)\r\n}\r\n\r\n/*背景*/\r\n>>> .el-table tr {\r\n  background-color: var(--lightBg);\r\n  color: var(--deepText);\r\n  font-weight: normal;\r\n}\r\n\r\n/*行间线*/\r\n>>> .el-table td, .building-top .el-table th.is-leaf {\r\n  border-bottom: 0 !important;\r\n}\r\n\r\n/*表格末尾*/\r\n>>> .el-table::before {\r\n  border-bottom: 0;\r\n  height: 0;\r\n}\r\n\r\n>>> .el-table, .el-table__expanded-cell {\r\n  background-color: var(--lightBg) !important;\r\n}\r\n\r\n/*鼠标悬浮*/\r\n>>> .el-table tbody tr:hover > td {\r\n  background-color: var(--hover) !important;\r\n}\r\n\r\n/*操作列样式*/\r\n>>> td.cellClass .cell {\r\n  height: 34px !important;\r\n}\r\n\r\n.specialCard:hover {\r\n  background-color: var(--lightBg);\r\n}\r\n\r\n/*分页管理器样式*/\r\n>>> .btn-quicknext, >>> .btn-quickprev, >>> .btn-next, >>> .btn-prev, >>> .number {\r\n  color: var(--deepText) !important;\r\n  background-color: var(--deepBg) !important;\r\n}\r\n\r\n>>> .btn-quicknext:hover, >>> .btn-quickprev:hover, >>> .btn-next:hover, >>> .btn-prev:hover, >>> .number:hover {\r\n  background-color: var(--hover) !important;\r\n}\r\n\r\n>>> .active {\r\n  background-color: var(--btn) !important;\r\n  color: var(--btnText) !important;\r\n}\r\n\r\n>>> .active:hover {\r\n  background-color: var(--btnActive) !important;\r\n}\r\n\r\n/*搜索按钮*/\r\n>>> .el-button--default {\r\n  font-size: 13px;\r\n  font-weight: bold;\r\n  background-color: var(--btn);\r\n  color: var(--deepText);\r\n  border: none;\r\n  transition: 0.2s;\r\n}\r\n\r\n>>> .el-button--default:hover {\r\n  background-color: var(--btnActive);\r\n}\r\n\r\n>>> .el-button--default::before {\r\n  display: none;\r\n}\r\n\r\n/*下拉框样式*/\r\n>>> .el-dropdown__caret-button {\r\n  font-size: 13px;\r\n  font-weight: bold;\r\n  margin-left: 2px !important;\r\n  color: var(--btnText);\r\n}\r\n\r\n>>> .el-dropdown-menu {\r\n  background-color: var(--inputBg) !important;\r\n  padding: 0;\r\n}\r\n\r\n>>> .popper__arrow, >>> .popper__arrow::after {\r\n  border-bottom-color: var(--inputBg) !important;\r\n  border-top-color: var(--inputBg) !important;\r\n}\r\n\r\n>>> .el-dropdown-menu__item {\r\n  color: var(--deepText);\r\n  font-weight: bold;\r\n  padding: 10px 30px;\r\n  background-color: var(--inputBg);\r\n}\r\n\r\n>>> .el-dropdown-menu__item:hover {\r\n  background-color: var(--hover);\r\n  color: var(--deepText);\r\n}\r\n\r\n>>> .el-dropdown > .el-button-group > .el-button:not(:last-child) {\r\n  width: 148px;\r\n}\r\n\r\n/*输入框样式*/\r\n.input {\r\n  margin-right: 20px;\r\n  width: 300px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 5px;\r\n}\r\n\r\n>>> .el-input__inner {\r\n  color: var(--deepText);\r\n  background-color: var(--inputBg);\r\n  border: solid 1px var(--inputBorder);\r\n  border-radius: 5px;\r\n}\r\n\r\n>>> .el-date-editor .el-input__inner::placeholder {\r\n  color: var(--lightText);\r\n  padding-left: 10px;\r\n}\r\n\r\n>>> .el-input__icon {\r\n  color: var(--deepText);\r\n}\r\n\r\n/*导出按钮*/\r\n.export {\r\n  color: var(--deepText);\r\n  cursor: pointer;\r\n  transition: 0.2s;\r\n}\r\n\r\n.export:hover {\r\n  color: var(--btn);\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Log.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Log.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Log.vue?vue&type=template&id=dce188cc&scoped=true&\"\nimport script from \"./Log.vue?vue&type=script&lang=js&\"\nexport * from \"./Log.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Log.vue?vue&type=style&index=0&id=dce188cc&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dce188cc\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","attrs","_s","log","todayApiTimes","yesterdayApiTimes","totalApiTimes","ref","on","exportRecords","nativeOn","$event","type","indexOf","_k","keyCode","key","search","apply","arguments","model","value","keyword","callback","$$v","expression","handleClick","btnWord","slot","logList","height","scopedSlots","_u","fn","scope","row","user","name","elders","length","_l","elder","elderlyId","elderlyName","total","pageSize","currentPage","pageChange","staticRenderFns","data","careHome","localStorage","getItem","JSON","parse","careHomeName","searchMode","methods","load","request","get","params","then","res","code","getCharts","$notify","message","msg","title","catch","err","$echarts","init","$refs","chart1","setOption","tooltip","trigger","formatter","position","confine","legend","Object","keys","apiDistribution","textStyle","color","fontWeight","itemGap","orient","top","left","series","center","radius","map","labelLine","show","label","itemStyle","borderWidth","borderColor","chart2","xAxis","apiTimesTrend","reverse","yAxis","values","pageNum","records","parseInt","command","window","location","href","serverIp","mounted","here","appendChild","dropdown","popperElm","computed","component"],"sourceRoot":""}