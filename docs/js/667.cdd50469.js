"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[667],{7668:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"flexRow"},[e("div",{staticStyle:{"margin-left":"23px"}},[e("el-input",{staticClass:"input",attrs:{"suffix-icon":"el-icon-search",clearable:""},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}}),e("el-button",{staticStyle:{width:"160px"},attrs:{size:"medium"},on:{click:t.search}},[t._v("根据药物名称搜索")])],1),e("div",{staticClass:"flexRow",staticStyle:{"margin-left":"auto","margin-right":"10px"}},[e("el-button",{on:{click:t.exportMedication}},[e("i",{staticClass:"el-icon-upload2",staticStyle:{"font-weight":"bold"}}),t._v(" 导出药品信息")]),e("el-upload",{staticStyle:{"margin-left":"10px"},attrs:{action:"https://"+t.serverIp+"/medication/import/"+t.careHomeName,"on-success":t.uploadSuccess,"on-error":t.uploadError,"before-upload":t.checkFileType,"show-file-list":!1}},[e("el-button",[e("i",{staticClass:"el-icon-download",staticStyle:{"font-weight":"bold"}}),t._v(" 导入药品信息")])],1)],1)]),e("div",{staticStyle:{margin:"-100px auto 40px"}}),e("div",{staticStyle:{"margin-top":"130px","overflow-y":"scroll",height:"calc(100% - 40px)","overflow-x":"hidden","margin-right":"-20px"}},[e("el-row",{staticStyle:{"margin-right":"20px"}},[e("el-col",{attrs:{span:7}},[e("el-card",{staticClass:"box-card card",staticStyle:{height:"266px",width:"360px",cursor:"pointer"},nativeOn:{click:function(e){return t.addNew.apply(null,arguments)}}},[e("div",{staticStyle:{display:"flex","justify-content":"center",height:"220px","align-items":"center"}},[e("span",{staticClass:"el-icon-plus plus",staticStyle:{"font-size":"50px"}})])])],1),t._l(t.list,(function(i){return e("el-col",{key:i.id,attrs:{span:7}},[e("el-card",{staticClass:"box-card card",staticStyle:{width:"360px",height:"266px"}},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"titleFont"},[t._v(t._s(i.name))]),e("el-popconfirm",{attrs:{title:"确定删除该药品信息吗？"},on:{confirm:function(e){return t.delMedication(i.id)}}},[e("el-button",{staticClass:"circleBtn danger",attrs:{slot:"reference",size:"medium",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1),e("el-button",{staticClass:"circleBtn primary",attrs:{size:"medium",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.editCard(i)}}})],1),e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[i.type?e("el-row",[e("el-col",{attrs:{span:7}},[t._v("药物剂型：")]),e("el-col",{attrs:{span:17}},[t._v(t._s(i.type))])],1):t._e(),i.mode?e("el-row",[e("el-col",{attrs:{span:7}},[t._v("给药途径：")]),e("el-col",{attrs:{span:17}},[t._v(t._s(i.mode))])],1):t._e(),i.frequency?e("el-row",[e("el-col",{attrs:{span:10}},[t._v("推荐给药频率：")]),e("el-col",{attrs:{span:14}},[t._v(t._s(i.frequency.frequency))])],1):t._e(),i.dosage?e("el-row",[e("el-col",{attrs:{span:10}},[t._v("推荐给药剂量：")]),e("el-col",{attrs:{span:14}},[t._v(t._s(i.dosage)+" "+t._s(i.unit))])],1):t._e()],1)])],1)})),(t.list.length+1)%3!==0?e("el-col",{attrs:{span:7}}):t._e(),(t.list.length+1)%3===1?e("el-col",{attrs:{span:7}}):t._e()],2)],1),e("el-dialog",{ref:"dialog",attrs:{visible:t.dialog,"show-close":!1,limit:1,"modal-append-to-body":!1,"append-to-body":!1},on:{"update:visible":function(e){t.dialog=e},close:t.closeDialog}},[e("h1",{staticStyle:{"font-size":"24px","padding-top":"20px",color:"var(--deepText)"},attrs:{align:"center"}},[t._v(" "+t._s(t.mode?"添加":"修改")+"药物信息 ")]),e("el-divider"),e("div",{staticStyle:{margin:"5% 10% 3%",padding:"3% 5% 1%"}},[e("el-form",{ref:"form",attrs:{model:t.medication,"label-width":"140px","label-position":"left"}},[e("el-form-item",{attrs:{label:"药品名称"}},[e("el-input",{staticStyle:{width:"80%"},attrs:{"prefix-icon":"el-icon-first-aid-kit",clearable:""},model:{value:t.medication.name,callback:function(e){t.$set(t.medication,"name",e)},expression:"medication.name"}})],1),e("el-form-item",{attrs:{label:"推荐药品剂型"}},[e("el-select",{staticStyle:{width:"120px"},model:{value:t.medication.type,callback:function(e){t.$set(t.medication,"type",e)},expression:"medication.type"}},[e("el-option",{attrs:{value:"冲剂"}}),e("el-option",{attrs:{value:"片剂"}}),e("el-option",{attrs:{value:"栓剂"}}),e("el-option",{attrs:{value:"丸剂"}}),e("el-option",{attrs:{value:"胶囊剂"}}),e("el-option",{attrs:{value:"颗粒剂"}}),e("el-option",{attrs:{value:"气雾剂"}}),e("el-option",{attrs:{value:"软膏剂"}}),e("el-option",{attrs:{value:"糖浆剂"}}),e("el-option",{attrs:{value:"注射剂"}}),e("el-option",{attrs:{value:"口服液体剂"}})],1)],1),e("el-form-item",{attrs:{label:"推荐给药途径"}},[e("el-select",{staticStyle:{width:"106px"},model:{value:t.medication.mode,callback:function(e){t.$set(t.medication,"mode",e)},expression:"medication.mode"}},[e("el-option",{attrs:{value:"口服给药"}}),e("el-option",{attrs:{value:"注射给药"}}),e("el-option",{attrs:{value:"舌下给药"}}),e("el-option",{attrs:{value:"吸入给药"}}),e("el-option",{attrs:{value:"直肠给药"}}),e("el-option",{attrs:{value:"皮下给药"}})],1)],1),e("el-form-item",{attrs:{label:"推荐给药频率"}},[e("el-select",{staticStyle:{width:"165px"},model:{value:t.medication.frequencyId,callback:function(e){t.$set(t.medication,"frequencyId",e)},expression:"medication.frequencyId"}},t._l(t.frequencies,(function(i){return e("el-option",{key:i.id,attrs:{label:i.frequency,value:i.id}},[e("el-row",[e("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:8}},[t._v(t._s(i.abbreviation))]),e("el-col",{attrs:{span:16}},[t._v(" "+t._s(i.frequency))])],1)],1)})),1)],1),e("el-form-item",{attrs:{label:"推荐给药剂量"}},[e("el-input-number",{attrs:{precision:2,step:.1,min:0},model:{value:t.medication.dosage,callback:function(e){t.$set(t.medication,"dosage",e)},expression:"medication.dosage"}}),e("el-select",{staticStyle:{width:"100px","margin-left":"20px"},attrs:{placeholder:"单位"},model:{value:t.medication.unit,callback:function(e){t.$set(t.medication,"unit",e)},expression:"medication.unit"}},[e("el-option",{attrs:{value:"g"}},[e("el-row",[e("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:14}},[t._v("g")]),e("el-col",{attrs:{span:10}},[t._v("克")])],1)],1),e("el-option",{attrs:{value:"mg"}},[e("el-row",[e("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:14}},[t._v("mg")]),e("el-col",{attrs:{span:10}},[t._v("毫克")])],1)],1),e("el-option",{attrs:{value:"μg"}},[e("el-row",[e("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:14}},[t._v("μg")]),e("el-col",{attrs:{span:10}},[t._v("微克")])],1)],1),e("el-option",{attrs:{value:"ng"}},[e("el-row",[e("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:14}},[t._v("ng")]),e("el-col",{attrs:{span:10}},[t._v("纳克")])],1)],1),e("el-option",{attrs:{value:"ml"}},[e("el-row",[e("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:14}},[t._v("ml")]),e("el-col",{attrs:{span:10}},[t._v("毫升")])],1)],1),e("el-option",{attrs:{value:"μl"}},[e("el-row",[e("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:14}},[t._v("μl")]),e("el-col",{attrs:{span:10}},[t._v("微升")])],1)],1),e("el-option",{attrs:{value:"mg/kg"}},[e("el-row",[e("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:14}},[t._v("mg/kg")]),e("el-col",{attrs:{span:10}},[t._v("毫克/公斤")])],1)],1)],1)],1)],1)],1),e("el-divider"),e("div",{staticStyle:{display:"flex","flex-direction":"row"}},[t.mode?e("el-button",{staticClass:"formBtn",on:{click:t.add}},[t._v("添加")]):e("el-button",{staticClass:"formBtn",on:{click:t.edit}},[t._v("修改")]),e("el-button",{staticClass:"formBtn",on:{click:t.closeDialog}},[t._v("取消")])],1)],1)],1)},l=[],s=i(2618),o={name:"Medication",data(){return{list:[],searchString:"",dialog:!1,medication:{},frequencies:[],mode:!0,serverIp:s.I,careHomeName:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).careHomeName:""}},methods:{addNew(){this.mode=!0,this.dialog=!0},closeDialog(){this.medication={},this.dialog=!1},add(){this.medication.careHomeName=this.careHomeName,this.request.post("/medication/add",this.medication).then((t=>{"200"===t.code?(this.$notify({type:"success",title:"成功",message:"添加药品信息成功"}),this.dialog=!1,this.load()):this.$notify({type:"error",title:"添加药品信息失败",message:t.msg})})).catch((t=>{this.$notify({type:"error",title:"添加药品信息失败",message:t})}))},load(){this.request.get("/medication/getAll",{params:{careHomeName:this.careHomeName}}).then((t=>{"200"===t.code?this.list=t.data:this.$notify({type:"error",title:"获取药品信息失败",message:t.msg})})).catch((t=>{this.$notify({type:"error",title:"获取药品信息失败",message:t})}))},editCard(t){this.mode=!1;let e={...t};null!==t.frequency&&(e.frequencyId=t.frequency.id),delete e.frequency,this.medication=e,this.dialog=!0},edit(){this.request.put("/medication/edit",this.medication).then((t=>{"200"===t.code?(this.$notify({type:"success",title:"成功",message:"药品信息修改成功"}),this.dialog=!1,this.search()):this.$notify({type:"error",title:"药品信息修改失败",message:t.msg})})).catch((t=>{this.$notify({type:"error",title:"药品信息修改失败",message:t})}))},search(){this.request.get("/medication/search?keyword="+this.searchString).then((t=>{"200"===t.code?this.list=t.data:this.$notify({type:"error",title:"药品信息查询失败",message:t.msg})})).catch((t=>{this.$notify({type:"error",title:"药品信息查询失败",message:t})}))},delMedication(t){this.request.delete("/medication/delete/"+t).then((t=>{"200"===t.code?(this.$notify({type:"success",title:"成功",message:"药品信息删除成功"}),this.search()):this.$notify({type:"error",title:"药品信息删除失败",message:t.msg})})).catch((t=>{this.$notify({type:"error",title:"药品信息删除失败",message:t})}))},uploadSuccess(t){"200"===t.code?(this.$notify({type:"success",title:"成功",message:"药品信息导入成功"}),this.load()):this.$notify({type:"error",title:"药品信息导入失败",message:t.msg})},uploadError(t){this.$notify({type:"error",title:"药品信息导入失败",message:t})},checkFileType(t){const e=t.name.substring(t.name.lastIndexOf(".")+1);return"xlsx"!==e&&"xls"!==e&&this.$notify({type:"error",title:"文件类型错误",message:"上传文件需是Excel文件!"}),"xlsx"===e||"xls"===e},exportMedication(){window.location.href="https://"+s.I+"/medication/export/"+this.careHomeName}},mounted(){this.load(),this.request.get("/medication-frequency/getAll").then((t=>{"200"===t.code?this.frequencies=t.data:this.$notify({type:"error",title:"获取频率信息失败",message:t.msg})})).catch((t=>{this.$notify({type:"error",title:"获取频率信息失败",message:t})}))}},n=o,r=i(1001),c=(0,r.Z)(n,a,l,!1,null,"2d0911a0",null),d=c.exports}}]);
//# sourceMappingURL=667.cdd50469.js.map